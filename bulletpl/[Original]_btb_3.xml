bulletML(vertical,[
  eaction(top,[
    fire(none,none,bulletRef(half,[1])),
    fire(none,none,bulletRef(half,[- 1])),
    wait(90+100 div (5-4*rank))
  ]),
  ebullet(half,bullet(some(dirAbs(0)),some(spdAbs(0)),[
    action([
      fire(some(dirAbs(4*(5-4*rank)* $1)),none,bulletRef(laser,[0.8])),
      wait(1),
      repeat(30 div (5-4*rank),[
        action([
          repeat(2,[
            action([fire(some(dirSeq(6*(5-4*rank)* $1)),none,bulletRef(laser,[0.8]))])
          ]),
          wait(1)
        ])
      ]),
      fire(some(dirAim(0)),none,bulletRef(laser,[0.9])),
      wait(1),
      repeat(30 div (5-4*rank),[
        action([
          repeat(2,[
            action([fire(some(dirSeq(6*(5-4*rank)* $1)),none,bulletRef(laser,[0.9]))])
          ]),
          wait(1)
        ])
      ]),
      fire(some(dirAbs(11* $1)),none,bulletRef(laser,[1.2])),
      wait(1),
      repeat(30 div (5-4*rank),[
        action([
          repeat(2,[
            action([fire(some(dirSeq(6*(5-4*rank)* $1)),none,bulletRef(laser,[1.2]))])
          ]),
          wait(1)
        ])
      ]),
      vanish
    ])
  ])),
  ebullet(laser,bullet(none,some(spdAbs(0.01)),[
    action([
      fire(some(dirRel(0)),some(spdAbs($1)),bullet(none,none,[])),
      wait(3),
      repeat(4,[
        action([
          fire(some(dirSeq(2.5-2.0*rank)),some(spdAbs($1)),bullet(none,none,[])),
          wait(3)
        ])
      ]),
      vanish
    ])
  ]))
]).
