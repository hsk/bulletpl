bulletML(none,[
  eaction(top1,[
    repeat(30+rank*30,[
      action([
        fire(some(dirSeq(220+rand*2)),some(spdAbs(1.2)),bullet(none,none,[])),
        fire(some(dirSeq(15)),some(spdAbs(1.2)),bullet(none,none,[])),
        fire(some(dirSeq(120)),some(spdAbs(1.2)),bullet(none,none,[])),
        fire(some(dirSeq(15)),some(spdAbs(1.2)),bullet(none,none,[])),
        wait(20-rank*10)
      ])
    ])
  ]),
  eaction(top2,[
    repeat(30+rank*30,[
      action([
        fire(some(dirAim(- 30+rand*60)),some(spdAbs(1.3)),bullet(none,none,[action([])])),
        wait(20-rank*10)
      ])
    ])
  ]),
  ebullet(kobati,bullet(none,none,[
    action([
      wait(5),
      changeDirection(dirAbs(180),1),
      changeSpeed(spdAbs(1.2),1),
      wait(1),
      repeat(9999,[
        action([
          wait(30-rank*10),
          fire(some(dirSeq(45)),some(spdAbs(0.4+rank*0.2)),bullet(none,none,[])),
          repeat(3,[
            action([fire(some(dirSeq(90)),some(spdAbs(0.4+rank*0.2)),bullet(none,none,[]))])
          ])
        ])
      ])
    ])
  ])),
  eaction(top3,[
    repeat(5+rank*5,[
      action([
        fire(some(dirAbs(90)),some(spdAbs(10)),bulletRef(kobati,[])),
        fire(some(dirAbs(90)),some(spdAbs(5)),bulletRef(kobati,[])),
        fire(some(dirAbs(- 90)),some(spdAbs(10)),bulletRef(kobati,[])),
        fire(some(dirAbs(- 90)),some(spdAbs(5)),bulletRef(kobati,[])),
        wait(120-rank*60)
      ])
    ]),
    wait(120)
  ])
]).
