bulletML(vertical,[
  eaction(top,[
    repeat(4+16*rank,[
      action([fire(some(dirAbs(120+120*rand)),none,bulletRef(bomb,[])),wait(60-30*rank)])
    ]),
    wait(180)
  ]),
  ebullet(bomb,bullet(none,some(spdAbs(0.5+1.9*rand)),[
    action([
      wait(50),
      fire(some(dirAbs(360*rand)),none,bulletRef(bombbit,[])),
      repeat(4+8*rank-1,[
        action([fire(some(dirSeq(360 div (4+8*rank))),none,bulletRef(bombbit,[]))])
      ]),
      vanish
    ])
  ])),
  ebullet(bombbit,bullet(none,some(spdAbs(0.8)),[
    action([
      wait(120),
      fire(some(dirRel(120)),some(spdAbs(1.3)),bullet(none,none,[])),
      fire(some(dirRel(240)),some(spdAbs(1.3)),bullet(none,none,[])),
      fire(some(dirAim(0)),some(spdAbs(1.3)),bulletRef(changecolor,[])),
      vanish
    ])
  ])),
  ebullet(changecolor,bullet(none,none,[action([fire(some(dirRel(0)),some(spdRel(0)),bullet(none,none,[])),vanish])]))
]).
