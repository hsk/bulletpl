bulletML(vertical,[
  top:action([
    repeat(4+16* $rank,[
      action([
        fire(dirAbs(120+120* $rand),spdAbs(1),bulletRef(bomb,[])),
        wait(60-30* $rank)
      ])
    ]),
    wait(180)
  ]),
  bomb:bullet(dirAim(0),spdAbs(0.5+1.9* $rand),[
    action([
      wait(50),
      fire(dirAbs(360* $rand),spdAbs(1),bulletRef(bombbit,[])),
      repeat(4+8* $rank-1,[action([fire(dirSeq(360/(4+8* $rank)),spdAbs(1),bulletRef(bombbit,[]))])]),
      vanish
    ])
  ]),
  bombbit:bullet(dirAim(0),spdAbs(0.8),[
    action([
      wait(120),
      fire(dirRel(120),spdAbs(1.3),bullet(dirAim(0),spdAbs(1),[])),
      fire(dirRel(240),spdAbs(1.3),bullet(dirAim(0),spdAbs(1),[])),
      fire(dirAim(0),spdAbs(1.3),bulletRef(changecolor,[])),
      vanish
    ])
  ]),
  changecolor:bullet(dirAim(0),spdAbs(1),[action([fire(dirRel(0),spdRel(0),bullet(dirAim(0),spdAbs(1),[])),vanish])])
]).
