bulletML(vertical,[
  top:action([
    repeat(2,[action([fire(dirAbs(180),spdAbs(4),bulletRef(seed,[])),wait(500)])]),
    wait(200)
  ]),
  seed:bullet(dirAim(0),spdAbs(1),[
    action([
      wait(9),
      fire(dirRel(0),spdAbs(1),bulletRef(seed2,[])),
      fire(dirRel(180),spdAbs(1),bulletRef(seed2,[])),
      vanish
    ])
  ]),
  seed2:bullet(dirAim(0),spdAbs(18),[action([wait(1),fire(dirRel(90),spdAbs(1),bulletRef(seed3,[])),vanish])]),
  seed3:bullet(dirAim(0),spdAbs(0.8),[
    action([changeDirection(dirSeq(1.2),9999)]),
    action([
      repeat(62+ $rank*100,[
        action([
          fire(dirSeq(40-10),spdAbs(1),bullet(dirAim(0),spdAbs(1),[])),
          fire(dirSeq(140),spdAbs(1),bullet(dirAim(0),spdAbs(1),[])),
          fire(dirSeq(40),spdAbs(1),bullet(dirAim(0),spdAbs(1),[])),
          fire(dirSeq(140),spdAbs(1),bullet(dirAim(0),spdAbs(1),[])),
          wait(8- $rank*6)
        ])
      ])
    ]),
    action([
      repeat(5,[action([fire(dirAim(0),spdAbs(1),bulletRef(tw,[])),wait(138)])]),
      vanish
    ])
  ]),
  tw:bullet(dirAim(0),spdAbs(1),[
    action([
      fire(dirAim(0),spdAbs(1),bullet(dirAim(- 12),spdAbs(1),[action([])])),
      repeat(3.5+ $rank*5+ $rand,[
        action([fire(dirAim(0),spdAbs(1),bullet(dirSeq(4),spdAbs(1),[action([])]))])
      ]),
      vanish
    ])
  ])
]).
