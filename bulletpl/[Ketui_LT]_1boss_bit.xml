bulletML(vertical,[
  ebullet('Dummy',bullet(none,none,[action([vanish])])),
  eaction('XWay',[actionRef('XWayFan',[$1,$2,0])]),
  eaction('XWayFan',[
    repeat($1-1,[action([fire(some(dirSeq($2)),some(spdSeq($3)),bullet(none,none,[]))])])
  ]),
  eaction('3way',[
    repeat(2,[
      action([
        wait(30),
        fire(some(dirAim(- 3)),some(spdAbs(1.4)),bullet(none,none,[])),
        actionRef('XWay',[3,2])
      ])
    ])
  ]),
  ebullet(bit,bullet(none,none,[
    action([
      repeat(3,[
        action([
          accel(some(spdAbs(0)),some(spdAbs(1)),60),
          actionRef('3way',[]),
          accel(some(spdAbs(- 2)),some(spdAbs(0)),60),
          actionRef('3way',[]),
          accel(some(spdAbs(0)),some(spdAbs(- 1)),60),
          actionRef('3way',[]),
          accel(some(spdAbs(2)),some(spdAbs(0)),60),
          actionRef('3way',[])
        ])
      ])
    ])
  ])),
  eaction(top,[
    repeat(4+rank*6,[
      action([
        fire(some(dirAbs(90)),some(spdAbs(2)),bulletRef(bit,[])),
        wait(245 div (4+rank*6))
      ])
    ]),
    wait(550)
  ])
]).
