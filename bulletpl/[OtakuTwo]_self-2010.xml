bulletML(vertical,[
  eaction(top,[
    actionRef(main,[rand,1,1,1,1]),
    actionRef(main,[rand,- 1,- 1,- 1,- 1]),
    actionRef(main,[rand,- 1,- 1,1,1]),
    actionRef(main,[rand,1,1,- 1,- 1]),
    actionRef(main,[rand,1,- 1,- 1,1]),
    actionRef(main,[rand,- 1,1,1,- 1]),
    actionRef(main,[rand,- 1,1,- 1,1]),
    actionRef(main,[rand,1,- 1,1,- 1])
  ]),
  eaction(main,[
    fire(some(dirAbs(45)),none,bulletRef(cross,[$1,$2])),
    fire(some(dirSeq(90)),none,bulletRef(cross,[$1,$3])),
    fire(some(dirSeq(90)),none,bulletRef(cross,[$1,$4])),
    fire(some(dirSeq(90)),none,bulletRef(cross,[$1,$5])),
    wait(200-rank*100)
  ]),
  ebullet(cross,bullet(none,some(spdAbs(1)),[
    action([
      wait(15),
      changeSpeed(spdAbs(0),1),
      fire(some(dirAbs(360* $1* $2)),some(spdAbs(1+rank*rank*1)),bullet(none,none,[])),
      fire(some(dirSeq(180* $2)),some(spdAbs(1+rank*rank*1)),bullet(none,none,[])),
      repeat(49,[
        action([
          wait(4-rank*2),
          fire(some(dirSeq(187.7* $2)),some(spdAbs(1+rank*rank*1)),bullet(none,none,[])),
          fire(some(dirSeq(180* $2)),some(spdAbs(1+rank*rank*1)),bullet(none,none,[]))
        ])
      ]),
      vanish
    ])
  ]))
]).
