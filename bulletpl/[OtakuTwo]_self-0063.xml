bulletML(none,[
  eaction(top,[
    actionRef(move,[180]),
    changeDirection(dirAim(0),1),
    wait(1),
    repeat(50,[
      action([
        wait(1),
        fireRef(winder,[22.5-rank*12.5,7]),
        fireRef(winder,[- 22.5+rank*12.5,7]),
        fireRef(winder,[22.5-rank*12.5,7.1]),
        fireRef(winder,[- 22.5+rank*12.5,7.1])
      ])
    ]),
    repeat(5,[
      action([
        actionRef(wall,[]),
        fire(some(dirAbs(0)),some(spdAbs(0)),bulletRef(round,[])),
        actionRef(wall,[]),
        actionRef(wall,[]),
        actionRef(wall,[])
      ])
    ]),
    wait(50),
    actionRef(move,[0])
  ]),
  eaction(move,[
    changeDirection(dirAbs($1),1),
    changeSpeed(spdAbs(2),1),
    wait(18),
    changeSpeed(spdAbs(0),1),
    wait(5)
  ]),
  eaction(wall,[
    changeDirection(dirRel(- 60+rand*120),100+rank*50),
    repeat(100-rand*50,[
      action([
        wait(1),
        fireRef(winder,[22.5-rank*12.5,7]),
        fireRef(winder,[- 22.5+rank*12.5,7]),
        fireRef(winder,[22.5-rank*12.5,7.1]),
        fireRef(winder,[- 22.5+rank*12.5,7.1])
      ])
    ])
  ]),
  efire(winder,fire(some(dirRel($1)),some(spdAbs($2)),bullet(none,none,[]))),
  ebullet(round,bullet(none,none,[
    action([
      wait(100*rand),
      fire(some(dirAbs(rand*360)),some(spdAbs(1.0+rank*1.0)),bullet(none,none,[])),
      fire(some(dirSeq(4)),some(spdAbs(0.8+rank*0.8)),bullet(none,none,[])),
      repeat(44,[
        action([
          fire(some(dirSeq(4)),some(spdAbs(1.0+rank*1.0)),bullet(none,none,[])),
          fire(some(dirSeq(4)),some(spdAbs(0.8+rank*0.8)),bullet(none,none,[]))
        ])
      ]),
      vanish
    ])
  ]))
]).
