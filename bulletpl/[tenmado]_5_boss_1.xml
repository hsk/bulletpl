bulletML(vertical,[
  eaction(top,[
    fire(some(dirAbs(0)),some(spdAbs(0)),bulletRef(random,[])),
    repeat(8,[
      action([
        fire(some(dirAbs(90)),some(spdAbs(0.5)),bulletRef(surprise,[])),
        fire(some(dirAbs(270)),some(spdAbs(0.5)),bulletRef(surprise,[])),
        wait(100)
      ])
    ]),
    wait(20)
  ]),
  ebullet(surprise,bullet(none,none,[
    action([
      wait(100),
      changeSpeed(spdAbs(0),1),
      repeat(5,[
        action([
          repeat(30,[
            action([
              fire(some(dirAim(3.5)),some(spdAbs(15+rand*15)),bullet(none,none,[action([])])),
              fire(some(dirAim(- 3.5)),some(spdAbs(15+rand*15)),bullet(none,none,[action([])]))
            ])
          ]),
          wait(1)
        ])
      ]),
      vanish
    ])
  ])),
  ebullet(random,bullet(none,none,[
    action([
      wait(200),
      repeat(6000 div (130-100*rank),[
        action([
          fire(some(dirAim(- 22+44*rand)),some(spdAbs(1.6+1.0*rand)),bullet(none,none,[])),
          wait(0.1*(130-100*rank))
        ])
      ]),
      vanish
    ])
  ]))
]).
