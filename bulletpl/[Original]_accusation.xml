bulletML(vertical,[
  eaction(top,[fire(some(dirAbs(360*rand)),none,bulletRef(centerbit,[])),wait(800)]),
  ebullet(centerbit,bullet(some(dirAbs(180)),some(spdAbs(0.9)),[
    action([
      wait(40),
      changeSpeed(spdAbs(0.0),1),
      wait(5),
      fire(some(dirAbs(360*rand)),none,bulletRef(pillarbit,[])),
      repeat(17,[action([fire(some(dirSeq(5)),none,bulletRef(dummybit,[]))])]),
      repeat(3,[
        action([
          fire(some(dirSeq(5)),none,bulletRef(pillarbit,[])),
          repeat(17,[action([fire(some(dirSeq(5)),none,bulletRef(dummybit,[]))])])
        ])
      ]),
      wait(120),
      repeat(140,[
        action([
          fire(some(dirAbs(360*rand)),some(spdAbs(0.2)),bulletRef(weak,[240])),
          wait(2)
        ])
      ]),
      repeat(70,[
        action([
          fire(some(dirAbs(360*rand)),some(spdAbs(2.0)),bulletRef(weak,[24])),
          repeat(4,[action([fire(some(dirSeq(0)),some(spdSeq(- 0.2)),bulletRef(weak,[24]))])]),
          wait(2)
        ])
      ]),
      vanish
    ])
  ])),
  ebullet(pillarbit,bullet(none,some(spdAbs(0.6)),[
    action([
      wait(120),
      changeSpeed(spdAbs(0.001),1),
      wait(120),
      repeat(300 div (35-33*rank),[
        action([
          repeat(10,[
            action([fire(some(dirAbs(360*rand)),some(spdAbs(2.0)),bulletRef(weak,[15]))])
          ]),
          fire(some(dirRel(- 45+90*rand)),some(spdAbs((2.5+1.0*rand)*(0.25+0.75*rank))),bullet(none,none,[])),
          wait(35-33*rank)
        ])
      ]),
      vanish
    ])
  ])),
  ebullet(dummybit,bullet(none,some(spdAbs(0.6)),[
    action([
      wait(120),
      changeSpeed(spdAbs(0.001),1),
      wait(120),
      repeat(300 div (35-33*rank),[
        action([
          fire(some(dirRel(- 45+90*rand)),some(spdAbs((2.5+1.0*rand)*(0.25+0.75*rank))),bullet(none,none,[])),
          wait(35-33*rank)
        ])
      ]),
      vanish
    ])
  ])),
  ebullet(weak,bullet(none,none,[action([wait($1),vanish])]))
]).
