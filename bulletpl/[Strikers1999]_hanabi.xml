bulletML(vertical,[
  eaction(top,[
    repeat(3,[
      action([
        fire(some(dirAbs(180)),some(spdAbs(3)),bulletRef(fastHanabi,[])),
        wait(110-rank*60)
      ])
    ])
  ]),
  eaction(fastFour,[
    fire(some(dirSeq(5)),some(spdAbs(2+rank)),bullet(none,none,[])),
    fire(some(dirSeq(- 10)),some(spdAbs(2+rank)),bullet(none,none,[])),
    fire(some(dirSeq(15)),some(spdAbs(1.5+rank)),bullet(none,none,[])),
    fire(some(dirSeq(- 20)),some(spdAbs(1.5+rank)),bullet(none,none,[]))
  ]),
  eaction(slowFour,[
    fire(some(dirSeq(5)),some(spdAbs(1+rank*0.8)),bullet(none,none,[])),
    fire(some(dirSeq(- 10)),some(spdAbs(1+rank*0.8)),bullet(none,none,[])),
    fire(some(dirSeq(15)),some(spdAbs(0.7+rank*0.8)),bullet(none,none,[])),
    fire(some(dirSeq(- 20)),some(spdAbs(0.7+rank*0.8)),bullet(none,none,[]))
  ]),
  ebullet(fastHanabi,bullet(none,none,[
    action([
      wait(15),
      fire(some(dirAim(0)),some(spdAbs(2.5+rank)),bullet(none,none,[])),
      actionRef(fastFour,[]),
      repeat(16,[
        action([
          fire(some(dirSeq(32.5)),some(spdAbs(2.5+rank)),bullet(none,none,[])),
          actionRef(fastFour,[])
        ])
      ]),
      fireRef(slowHanabi,[]),
      vanish
    ])
  ])),
  efire(slowHanabi,fire(none,none,bullet(none,none,[
    action([
      fire(some(dirAbs(0)),some(spdAbs(1.3+rank*0.8)),bullet(none,none,[])),
      actionRef(slowFour,[]),
      repeat(16,[
        action([
          fire(some(dirSeq(32.5)),some(spdAbs(1.3+rank*0.8)),bullet(none,none,[])),
          actionRef(slowFour,[])
        ])
      ]),
      vanish
    ])
  ])))
]).
