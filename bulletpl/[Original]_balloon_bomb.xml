bulletML(vertical,[
  eaction(top,[
    repeat(3+17*rank,[
      action([
        fire(some(dirAbs(120+120*rand)),some(spdAbs(1.0+0.3*rand)),bulletRef(balloon,[0.6+1.2*rank])),
        wait(43-30*rank)
      ])
    ]),
    wait(200-100*rank)
  ]),
  ebullet(balloon,bullet(none,none,[
    action([
      wait(20),
      changeSpeed(spdAbs(0),1),
      wait(5),
      fire(some(dirAbs(360*rand)),some(spdAbs($1*0.88)),bulletRef(balloonbit,[$1*0.88])),
      repeat(2,[
        action([
          fire(some(dirSeq(120)),some(spdAbs($1*0.88)),bulletRef(balloonbit,[$1*0.88]))
        ])
      ]),
      repeat(24,[
        action([fire(some(dirSeq(15)),some(spdAbs($1)),bulletRef(curvebit,[10,40,$1]))])
      ]),
      wait(5),
      fire(some(dirSeq(10)),some(spdAbs($1)),bulletRef(curvebit,[10,40,$1])),
      repeat(23,[
        action([fire(some(dirSeq(15)),some(spdAbs($1)),bulletRef(curvebit,[10,40,$1]))])
      ]),
      fire(some(dirSeq(- 3)),some(spdAbs($1*0.88)),bulletRef(balloonbit,[$1*0.88])),
      repeat(2,[
        action([
          fire(some(dirSeq(120)),some(spdAbs($1*0.88)),bulletRef(balloonbit,[$1*0.88]))
        ])
      ]),
      vanish
    ])
  ])),
  ebullet(balloonbit,bullet(none,none,[
    action([
      wait(4),
      fire(some(dirRel(- 60)),some(spdAbs($1)),bulletRef(curvebit,[5,- 50,$1])),
      repeat(9,[
        action([fire(some(dirSeq(13)),some(spdAbs($1)),bulletRef(curvebit,[5,- 50,$1]))])
      ]),
      vanish
    ])
  ])),
  ebullet(curvebit,bullet(none,none,[
    action([
      wait($1),
      fire(some(dirRel($2)),some(spdAbs($3)),bullet(none,none,[])),
      vanish
    ])
  ]))
]).
