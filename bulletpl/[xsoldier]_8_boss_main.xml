bulletML(vertical,[
  top:action([
    fire(dirAbs(0),spdAbs(0),bulletRef(dummy,[90])),
    fire(dirAbs(0),spdAbs(0),bulletRef(dummy,[270])),
    wait(100- $rank*90),
    fire(dirAbs(0),spdAbs(0),bulletRef(allway,[0,1.5])),
    wait(5),
    fire(dirAbs(0),spdAbs(0),bulletRef(allway,[2.5,1.8])),
    wait(20)
  ]),
  dummy:bullet(none,none,[
    action([
      fire(dirAbs($1),spdAbs(0),bulletRef(bit,[])),
      fire(dirAbs($1),spdAbs(0.5),bulletRef(bit,[])),
      fire(dirAbs($1),spdAbs(1.0),bulletRef(bit,[])),
      fire(dirAbs($1),spdAbs(1.5),bulletRef(bit,[])),
      vanish
    ])
  ]),
  allway:bullet(none,none,[
    action([
      fire(dirAbs($1),spdAbs($2),bullet(none,none,[])),
      repeat(71,[action([fire(dirSeq(5),spdAbs($2),bullet(none,none,[]))])]),
      vanish
    ])
  ]),
  bit:bullet(none,none,[
    action([
      wait(20),
      changeSpeed(spdAbs(0),1),
      wait(105- $rank*90),
      repeat(20,[
        action([
          fire(dirAbs(180),spdAbs(3),bullet(none,none,[])),
          fire(dirAbs(180),spdAbs(3.5),bullet(none,none,[])),
          fire(dirAbs(180),spdAbs(4),bullet(none,none,[])),
          wait(1)
        ])
      ]),
      vanish
    ])
  ])
]).
